{"version":3,"sources":["logo.png","components/search.js","components/history.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","Search","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onChangeTodoDescription","e","setState","user_query","target","value","onSubmit","preventDefault","t0","performance","now","last_query","state","that","assertThisInitialized","user_hash","s","i","hash","length","charCodeAt","navigator","userAgent","axios","get","then","res","news","data","result_prop","t1","submit","query_time","toFixed","react_default","a","createElement","style","marginTop","className","type","onChange","onClick","height","map","index","key","href","url","fontSize","title","content","substring","Component","History","gethis_url","opacity","App","history","react_router_dom","rel","src","logo","width","alt","to","react_router","path","exact","component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.159ec75c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.4b3605e5.png\";","import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nfunction hash(s) {\n  var hash = 0,\n    i,\n    chr;\n  if (s.length === 0) return hash;\n  for (i = 0; i < s.length; i++) {\n    chr = s.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n}\n\nfunction Result_prop(props) {\n  if (props[0] === true) {\n    return (\n      <div className=\"result_prop mb-5\">\n        {props[1]} 項搜尋結果(搜尋時間約{props[2]}秒)\n      </div>\n    );\n  } else if (props[0] == null) {\n    return;\n  } else {\n    return (\n      <p className=\"result_prop mb-5\">\n        找不到符合搜尋字詞「{props[3]}」的新聞。\n      </p>\n    );\n  }\n}\n\nexport default class Search extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      news: [],\n      submit: false,\n      user_query: \"\",\n      last_query: \"\",\n      result_prop: null,\n      query_time: 0\n    };\n  }\n\n  onChangeTodoDescription = e => {\n    this.setState({\n      user_query: e.target.value\n    });\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    const t0 = performance.now();\n    var last_query = this.state.user_query;\n\n    const that = this;\n    var user_hash = hash(navigator.userAgent);\n\n    axios\n      .get(\n        \"http://linux4.csie.ntu.edu.tw:9487/\" +\n          user_hash +\n          \"/search?keyword=\" +\n          this.state.user_query\n      )\n      .then(res => that.setState({ news: res.data.news }))\n      .then(() => {\n        const t1 = performance.now();\n        var result_prop;\n        if (this.state.news.length !== 0) {\n          result_prop = true;\n        } else {\n          result_prop = false;\n        }\n        this.setState({\n          user_query: \"\",\n          last_query: last_query,\n          submit: true,\n          query_time: ((t1 - t0) / 1000).toFixed(2),\n          result_prop: result_prop\n        });\n      });\n  };\n\n  render() {\n    return (\n      <div style={{ marginTop: 10 }}>\n        <h3 className=\"mb-5\">keyword</h3>\n        <form onSubmit={this.onSubmit}>\n          <div className=\"form-group RNNXgb form-control\">\n            <label />\n            <input\n              type=\"text\"\n              className=\"input\"\n              value={this.state.user_query}\n              onChange={this.onChangeTodoDescription}\n            />\n            <div onClick={this.onSubmit}>\n              <i\n                style={{ height: \"100%\" }}\n                className=\" ml-2 fa fa-search search_icon\"\n              />\n            </div>\n          </div>\n          {Result_prop([\n            this.state.result_prop,\n            this.state.news.length,\n            this.state.query_time,\n            this.state.last_query\n          ])}\n          <div className=\"container\">\n            {this.state.news.map((e, index) => {\n              return (\n                <div key={index}>\n                  <a href={e.url} style={{ fontSize: 24 }}>\n                    {e.title}\n                  </a>\n                  <div>{e.url}</div>\n                  <div>{e.content.substring(0, 130) + \"...\"}</div>\n                  <br />\n                </div>\n              );\n            })}\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nfunction hash(s) {\n  var hash = 0,\n    i,\n    chr;\n  if (s.length === 0) return hash;\n  for (i = 0; i < s.length; i++) {\n    chr = s.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; \n  }\n  return hash;\n}\n\nexport default class History extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { title: [] };\n  }\n\n  componentDidMount() {\n    var user_hash = hash(navigator.userAgent);\n    var gethis_url =\n      \"http://linux4.csie.ntu.edu.tw:9487/\" + user_hash + \"/gethistory\";\n    const that = this;\n    axios.get(gethis_url).then(res => that.setState({ title: res.data }));\n  }\n\n  render() {\n    return (\n      <div>\n        <h3>Searching history</h3>\n        <table className=\"table table-striped\" style={{ marginTop: 20 }}>\n          <thead>\n            <tr>\n              <th>\n                Title <p style={{ opacity: 0.8 }}>(newest to oldest)</p>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {/* {console.log(this.state.title)} */}\n            {this.state.title.map((e, index) => {\n              return (\n                <tr key={index}>\n                  <td>{e}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport Search from \"./components/search\";\nimport History from \"./components/history\";\nimport logo from \"./logo.png\";\nimport './App.css'\n\nclass App extends Component {\n  state={\n    history:[]\n  }\n  render() {\n    return (\n      <Router>\n        <div className=\"container\">\n          <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n            <a className=\"navbar-brand\" href=\"http://cc.ee.ntu.edu.tw/~ric/\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <img src={logo} width=\"30\" height=\"30\" alt=\"CodingTheSmartWay.com\" />\n            </a>\n            <Link to=\"/\" className=\"navbar-brand\">Searching engine</Link>\n            <div className=\"collpase navbar-collapse\">\n              <ul className=\"navbar-nav mr-auto\">\n                <li className=\"navbar-item\">\n                  <Link to=\"/history\" className=\"nav-link\">history</Link>\n                </li>\n              </ul>\n            </div>\n          </nav>\n          <br />\n          <Route path=\"/\" exact component={Search} />\n          <Route path=\"/history\" component={History} />\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n"],"sourceRoot":""}